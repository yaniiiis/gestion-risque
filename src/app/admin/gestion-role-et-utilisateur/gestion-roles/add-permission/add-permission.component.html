<style>
  .card .card-header {
    background: var(--theme-color) !important;
  }
</style>
<div class="main-content">
  <div class="container-fluid">
    <div class="card">
      <div class="card-header card-header-danger">
        <h4 class="card-title">Ajouter une Permission</h4>
      </div>
      <div class="card-body">
        <div class="container">
          <form
            name="permForm"
            [formGroup]="AddPermissionsForm"
            (ngSubmit)="onSubmit()"
          >
            <ng-container
              *ngIf="privileges$ | async as result"
              [ngSwitch]="result.dataState"
            >
              <ng-container *ngSwitchCase="DataStateEnum.LOADING">
                <div class="d-flex justify-content-center">
                  <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </div>
              </ng-container>
              <ng-container *ngSwitchCase="DataStateEnum.LOADED">
                <div class="form-group">
                  <label for="privileges"> privileges </label>
                  <select
                    class="form-select"
                    formControlName="privileges"
                    name="privileges"
                  >
                    <option
                      *ngFor="let privileges of result.data"
                      value="{{ privileges.id }}"
                    >
                      {{ privileges.nameP }}
                    </option>
                  </select>
                </div>
              </ng-container>
            </ng-container>

            <ng-container
              *ngIf="ressources$ | async as result"
              [ngSwitch]="result.dataState"
            >
              <ng-container *ngSwitchCase="DataStateEnum.LOADING">
                <div class="d-flex justify-content-center">
                  <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </div>
              </ng-container>
              <ng-container *ngSwitchCase="DataStateEnum.LOADED">
                <div class="form-group">
                  <label for="ressources"> ressources </label>
                  <select
                    class="form-select"
                    formControlName="ressources"
                    name="ressources"
                  >
                    <option
                      *ngFor="let ressource of result.data"
                      value="{{ ressource.id }}"
                    >
                      {{ ressource.name }}
                    </option>
                  </select>
                </div>
              </ng-container>
            </ng-container>

            <button
              class="btn btn-default align-content-centerbtn-sm"
              type="submit"
            >
              sauvegarder
            </button>
          </form>
          <div
            *ngIf="errorMessage !== null"
            class="alert alert-danger mt-5 center"
            role="alert"
          >
            {{ errorMessage }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
